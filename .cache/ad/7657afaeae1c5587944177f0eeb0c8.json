{"id":"RB8s","dependencies":[{"name":"C:\\Users\\shake\\Desktop\\LoginProject\\package.json","includedInParent":true,"mtime":1649424641031},{"name":"./schedule.js","loc":{"line":1,"column":46,"index":46},"parent":"C:\\Users\\shake\\Desktop\\LoginProject\\public\\js\\sender.js","resolved":"C:\\Users\\shake\\Desktop\\LoginProject\\public\\js\\schedule.js"},{"name":"./mailingList.js","loc":{"line":2,"column":25,"index":89},"parent":"C:\\Users\\shake\\Desktop\\LoginProject\\public\\js\\sender.js","resolved":"C:\\Users\\shake\\Desktop\\LoginProject\\public\\js\\mailingList.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.submitHandler=void 0;var e=require(\"./schedule.js\"),t=require(\"./mailingList.js\");function a(e,t,a,n,s,r,o){try{var i=e[r](o),c=i.value}catch(u){return void a(u)}i.done?t(c):Promise.resolve(c).then(n,s)}function n(e){return function(){var t=this,n=arguments;return new Promise(function(s,r){var o=e.apply(t,n);function i(e){a(o,s,r,i,c,\"next\",e)}function c(e){a(o,s,r,i,c,\"throw\",e)}i(void 0)})}}var s=$(\"#notification\").first(),r=$(\"#toast-text\"),o=$(\"#schedule-switch\"),i=$(\"#message-input\"),c=function(){var e=$(\".mailing-list-checkbox\").toArray();return e.forEach(function(e){if(e.checked)return!0}),e},u=function(){if(!c()){if(s.length>0){s.removeClass(\"bg-primary bg-seccess\").addClass(\"bg-danger\");var t=new bootstrap.Toast(s);r.empty().append(\"You must select at least one contact ‼️😬\"),t.show()}return!1}if(!$(\"#message-switch\").is(\":checked\")&&!i.text()){if(s.length>0){s.removeClass(\"bg-primary bg-seccess\").addClass(\"bg-danger\");var a=new bootstrap.Toast(s);r.empty().append(\"Message body can not be emty‼️😬\"),a.show()}return!1}if(!o.is(\":checked\")&&!(0,e.dateTimeValidation)(datePicker.value)){if(s.length>0){s.removeClass(\"bg-primary bg-seccess\").addClass(\"bg-danger\");var n=new bootstrap.Toast(s),u=datePicker.value?\"Must be at least 1 hour ahead‼️😬\":\"You must pick date and time‼️😬\";r.empty().append(u),n.show()}return!1}return!0},d=function(){var a=n(regeneratorRuntime.mark(function a(n){var o,c,d,l;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(o=(0,e.toSendNow)(),n.preventDefault(),!u()){a.next=8;break}return c=new Date(datePicker.value),d=i.text()||null,a.next=7,fetch(\"/admin/messages/\".concat(n.originalEvent.submitter.id),{method:\"POST\",headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\",\"CSRF-Token\":Cookies.get(\"XSRF-TOKEN\")},body:JSON.stringify({contacts:t.contacts,message:d,now:o,sendAt:c,via:n.originalEvent.submitter.id})});case 7:s.length>0&&(s.removeClass(\"bg-danger bg-primary\").addClass(\"bg-success\"),l=new bootstrap.Toast(s),o?r.empty().append(\"Message successfully sent. 🎉\"):r.empty().append(\"Message scheduled to  \".concat(c.getDate(),\"/\").concat(c.getMonth()+1,\"/\").concat(c.getFullYear(),\"  at  \").concat(c.getHours(),\":\").concat(c.getMinutes(),\" 🎉\")),l.show());case 8:case\"end\":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}();exports.submitHandler=d;"},"sourceMaps":{"js":{"mappings":[{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":0}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":13}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":20}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":35}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":43}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":56}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":57}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":64}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":68}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":76}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":95}},{"source":"sender.js","original":{"line":1,"column":0},"generated":{"line":1,"column":97}},{"source":"sender.js","original":{"line":1,"column":0},"generated":{"line":1,"column":101}},{"source":"sender.js","original":{"line":1,"column":0},"generated":{"line":1,"column":103}},{"source":"sender.js","original":{"line":1,"column":0},"generated":{"line":1,"column":111}},{"source":"sender.js","original":{"line":2,"column":0},"generated":{"line":1,"column":128}},{"source":"sender.js","original":{"line":2,"column":0},"generated":{"line":1,"column":130}},{"source":"sender.js","original":{"line":2,"column":0},"generated":{"line":1,"column":138}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":158}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":167}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":169}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":171}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":173}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":175}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":177}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":179}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":181}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":184}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":188}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":192}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":194}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":196}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":199}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":202}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":204}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":206}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":212}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":218}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":221}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":233}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":235}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":238}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":240}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":245}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":247}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":250}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":258}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":266}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":269}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":274}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":276}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":279}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":288}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":290}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":293}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":300}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":311}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":315}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":317}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":322}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":324}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":334}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":341}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":345}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":353}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":362}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":364}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":367}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":371}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":373}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":375}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":381}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":383}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":386}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":395}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":397}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":400}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":402}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":404}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":406}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":408}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":410}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":412}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":419}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":422}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":431}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":433}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":436}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":438}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":440}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":442}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":444}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":446}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":448}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":456}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":459}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":466}},{"source":"sender.js","original":{"line":3,"column":0},"generated":{"line":1,"column":472}},{"source":"sender.js","name":"liveToast","original":{"line":3,"column":6},"generated":{"line":1,"column":476}},{"source":"sender.js","name":"$","original":{"line":3,"column":18},"generated":{"line":1,"column":478}},{"source":"sender.js","original":{"line":3,"column":20},"generated":{"line":1,"column":480}},{"source":"sender.js","name":"first","original":{"line":3,"column":37},"generated":{"line":1,"column":497}},{"source":"sender.js","name":"toastText","original":{"line":4,"column":6},"generated":{"line":1,"column":505}},{"source":"sender.js","name":"$","original":{"line":4,"column":18},"generated":{"line":1,"column":507}},{"source":"sender.js","original":{"line":4,"column":20},"generated":{"line":1,"column":509}},{"source":"sender.js","name":"scheduleSwitch","original":{"line":5,"column":6},"generated":{"line":1,"column":524}},{"source":"sender.js","name":"$","original":{"line":5,"column":23},"generated":{"line":1,"column":526}},{"source":"sender.js","original":{"line":5,"column":25},"generated":{"line":1,"column":528}},{"source":"sender.js","name":"messageText","original":{"line":6,"column":6},"generated":{"line":1,"column":548}},{"source":"sender.js","name":"$","original":{"line":6,"column":20},"generated":{"line":1,"column":550}},{"source":"sender.js","original":{"line":6,"column":22},"generated":{"line":1,"column":552}},{"source":"sender.js","name":"checkCheckboxes","original":{"line":8,"column":6},"generated":{"line":1,"column":570}},{"source":"sender.js","original":{"line":8,"column":24},"generated":{"line":1,"column":572}},{"source":"sender.js","name":"checkboxes","original":{"line":9,"column":8},"generated":{"line":1,"column":583}},{"source":"sender.js","name":"checkboxes","original":{"line":9,"column":8},"generated":{"line":1,"column":587}},{"source":"sender.js","name":"$","original":{"line":9,"column":21},"generated":{"line":1,"column":589}},{"source":"sender.js","original":{"line":9,"column":23},"generated":{"line":1,"column":591}},{"source":"sender.js","name":"toArray","original":{"line":9,"column":49},"generated":{"line":1,"column":617}},{"source":"sender.js","name":"checkboxes","original":{"line":13,"column":9},"generated":{"line":1,"column":627}},{"source":"sender.js","name":"checkboxes","original":{"line":10,"column":2},"generated":{"line":1,"column":634}},{"source":"sender.js","name":"forEach","original":{"line":10,"column":13},"generated":{"line":1,"column":636}},{"source":"sender.js","original":{"line":10,"column":21},"generated":{"line":1,"column":644}},{"source":"sender.js","name":"checkbox","original":{"line":10,"column":22},"generated":{"line":1,"column":653}},{"source":"sender.js","name":"checkbox","original":{"line":11,"column":8},"generated":{"line":1,"column":656}},{"source":"sender.js","name":"checkbox","original":{"line":11,"column":8},"generated":{"line":1,"column":659}},{"source":"sender.js","name":"checked","original":{"line":11,"column":17},"generated":{"line":1,"column":661}},{"source":"sender.js","original":{"line":11,"column":26},"generated":{"line":1,"column":669}},{"source":"sender.js","original":{"line":11,"column":33},"generated":{"line":1,"column":676}},{"source":"sender.js","name":"checkboxes","original":{"line":13,"column":9},"generated":{"line":1,"column":680}},{"source":"sender.js","name":"formValidation","original":{"line":16,"column":6},"generated":{"line":1,"column":683}},{"source":"sender.js","original":{"line":16,"column":23},"generated":{"line":1,"column":685}},{"source":"sender.js","original":{"line":17,"column":6},"generated":{"line":1,"column":696}},{"source":"sender.js","name":"checkCheckboxes","original":{"line":17,"column":7},"generated":{"line":1,"column":700}},{"source":"sender.js","original":{"line":17,"column":26},"generated":{"line":1,"column":704}},{"source":"sender.js","name":"liveToast","original":{"line":18,"column":8},"generated":{"line":1,"column":705}},{"source":"sender.js","name":"liveToast","original":{"line":18,"column":8},"generated":{"line":1,"column":708}},{"source":"sender.js","name":"length","original":{"line":18,"column":18},"generated":{"line":1,"column":710}},{"source":"sender.js","original":{"line":18,"column":27},"generated":{"line":1,"column":717}},{"source":"sender.js","original":{"line":18,"column":30},"generated":{"line":1,"column":719}},{"source":"sender.js","name":"liveToast","original":{"line":19,"column":6},"generated":{"line":1,"column":720}},{"source":"sender.js","name":"removeClass","original":{"line":19,"column":16},"generated":{"line":1,"column":722}},{"source":"sender.js","original":{"line":19,"column":28},"generated":{"line":1,"column":734}},{"source":"sender.js","name":"addClass","original":{"line":19,"column":53},"generated":{"line":1,"column":759}},{"source":"sender.js","original":{"line":19,"column":62},"generated":{"line":1,"column":768}},{"source":"sender.js","name":"toast","original":{"line":20,"column":12},"generated":{"line":1,"column":781}},{"source":"sender.js","name":"toast","original":{"line":20,"column":12},"generated":{"line":1,"column":785}},{"source":"sender.js","original":{"line":20,"column":20},"generated":{"line":1,"column":787}},{"source":"sender.js","name":"bootstrap","original":{"line":20,"column":24},"generated":{"line":1,"column":791}},{"source":"sender.js","name":"Toast","original":{"line":20,"column":34},"generated":{"line":1,"column":801}},{"source":"sender.js","name":"liveToast","original":{"line":20,"column":40},"generated":{"line":1,"column":807}},{"source":"sender.js","name":"toastText","original":{"line":21,"column":6},"generated":{"line":1,"column":810}},{"source":"sender.js","name":"empty","original":{"line":21,"column":16},"generated":{"line":1,"column":812}},{"source":"sender.js","name":"append","original":{"line":21,"column":24},"generated":{"line":1,"column":820}},{"source":"sender.js","original":{"line":21,"column":31},"generated":{"line":1,"column":827}},{"source":"sender.js","name":"toast","original":{"line":22,"column":6},"generated":{"line":1,"column":872}},{"source":"sender.js","name":"show","original":{"line":22,"column":12},"generated":{"line":1,"column":874}},{"source":"sender.js","original":{"line":24,"column":11},"generated":{"line":1,"column":881}},{"source":"sender.js","original":{"line":24,"column":11},"generated":{"line":1,"column":888}},{"source":"sender.js","original":{"line":26,"column":6},"generated":{"line":1,"column":890}},{"source":"sender.js","name":"$","original":{"line":26,"column":7},"generated":{"line":1,"column":894}},{"source":"sender.js","original":{"line":26,"column":9},"generated":{"line":1,"column":896}},{"source":"sender.js","name":"is","original":{"line":26,"column":28},"generated":{"line":1,"column":915}},{"source":"sender.js","original":{"line":26,"column":31},"generated":{"line":1,"column":918}},{"source":"sender.js","name":"messageText","original":{"line":26,"column":47},"generated":{"line":1,"column":932}},{"source":"sender.js","name":"text","original":{"line":26,"column":59},"generated":{"line":1,"column":934}},{"source":"sender.js","original":{"line":26,"column":67},"generated":{"line":1,"column":941}},{"source":"sender.js","name":"liveToast","original":{"line":27,"column":8},"generated":{"line":1,"column":942}},{"source":"sender.js","name":"liveToast","original":{"line":27,"column":8},"generated":{"line":1,"column":945}},{"source":"sender.js","name":"length","original":{"line":27,"column":18},"generated":{"line":1,"column":947}},{"source":"sender.js","original":{"line":27,"column":27},"generated":{"line":1,"column":954}},{"source":"sender.js","original":{"line":27,"column":30},"generated":{"line":1,"column":956}},{"source":"sender.js","name":"liveToast","original":{"line":28,"column":6},"generated":{"line":1,"column":957}},{"source":"sender.js","name":"removeClass","original":{"line":28,"column":16},"generated":{"line":1,"column":959}},{"source":"sender.js","original":{"line":28,"column":28},"generated":{"line":1,"column":971}},{"source":"sender.js","name":"addClass","original":{"line":28,"column":53},"generated":{"line":1,"column":996}},{"source":"sender.js","original":{"line":28,"column":62},"generated":{"line":1,"column":1005}},{"source":"sender.js","name":"toast","original":{"line":29,"column":12},"generated":{"line":1,"column":1018}},{"source":"sender.js","name":"toast","original":{"line":29,"column":12},"generated":{"line":1,"column":1022}},{"source":"sender.js","original":{"line":29,"column":20},"generated":{"line":1,"column":1024}},{"source":"sender.js","name":"bootstrap","original":{"line":29,"column":24},"generated":{"line":1,"column":1028}},{"source":"sender.js","name":"Toast","original":{"line":29,"column":34},"generated":{"line":1,"column":1038}},{"source":"sender.js","name":"liveToast","original":{"line":29,"column":40},"generated":{"line":1,"column":1044}},{"source":"sender.js","name":"toastText","original":{"line":30,"column":6},"generated":{"line":1,"column":1047}},{"source":"sender.js","name":"empty","original":{"line":30,"column":16},"generated":{"line":1,"column":1049}},{"source":"sender.js","name":"append","original":{"line":30,"column":24},"generated":{"line":1,"column":1057}},{"source":"sender.js","original":{"line":30,"column":31},"generated":{"line":1,"column":1064}},{"source":"sender.js","name":"toast","original":{"line":31,"column":6},"generated":{"line":1,"column":1100}},{"source":"sender.js","name":"show","original":{"line":31,"column":12},"generated":{"line":1,"column":1102}},{"source":"sender.js","original":{"line":33,"column":11},"generated":{"line":1,"column":1109}},{"source":"sender.js","original":{"line":33,"column":11},"generated":{"line":1,"column":1116}},{"source":"sender.js","original":{"line":36,"column":6},"generated":{"line":1,"column":1118}},{"source":"sender.js","name":"scheduleSwitch","original":{"line":36,"column":7},"generated":{"line":1,"column":1122}},{"source":"sender.js","name":"is","original":{"line":36,"column":22},"generated":{"line":1,"column":1124}},{"source":"sender.js","original":{"line":36,"column":25},"generated":{"line":1,"column":1127}},{"source":"sender.js","original":{"line":36,"column":41},"generated":{"line":1,"column":1142}},{"source":"sender.js","name":"datePicker","original":{"line":36,"column":60},"generated":{"line":1,"column":1144}},{"source":"sender.js","name":"datePicker","original":{"line":36,"column":60},"generated":{"line":1,"column":1146}},{"source":"sender.js","name":"datePicker","original":{"line":36,"column":60},"generated":{"line":1,"column":1166}},{"source":"sender.js","name":"value","original":{"line":36,"column":71},"generated":{"line":1,"column":1177}},{"source":"sender.js","original":{"line":36,"column":79},"generated":{"line":1,"column":1184}},{"source":"sender.js","name":"liveToast","original":{"line":37,"column":8},"generated":{"line":1,"column":1185}},{"source":"sender.js","name":"liveToast","original":{"line":37,"column":8},"generated":{"line":1,"column":1188}},{"source":"sender.js","name":"length","original":{"line":37,"column":18},"generated":{"line":1,"column":1190}},{"source":"sender.js","original":{"line":37,"column":27},"generated":{"line":1,"column":1197}},{"source":"sender.js","original":{"line":37,"column":30},"generated":{"line":1,"column":1199}},{"source":"sender.js","name":"liveToast","original":{"line":38,"column":6},"generated":{"line":1,"column":1200}},{"source":"sender.js","name":"removeClass","original":{"line":38,"column":16},"generated":{"line":1,"column":1202}},{"source":"sender.js","original":{"line":38,"column":28},"generated":{"line":1,"column":1214}},{"source":"sender.js","name":"addClass","original":{"line":38,"column":53},"generated":{"line":1,"column":1239}},{"source":"sender.js","original":{"line":38,"column":62},"generated":{"line":1,"column":1248}},{"source":"sender.js","name":"toast","original":{"line":40,"column":12},"generated":{"line":1,"column":1261}},{"source":"sender.js","name":"toast","original":{"line":40,"column":12},"generated":{"line":1,"column":1265}},{"source":"sender.js","original":{"line":40,"column":20},"generated":{"line":1,"column":1267}},{"source":"sender.js","name":"bootstrap","original":{"line":40,"column":24},"generated":{"line":1,"column":1271}},{"source":"sender.js","name":"Toast","original":{"line":40,"column":34},"generated":{"line":1,"column":1281}},{"source":"sender.js","name":"liveToast","original":{"line":40,"column":40},"generated":{"line":1,"column":1287}},{"source":"sender.js","name":"msg","original":{"line":41,"column":12},"generated":{"line":1,"column":1290}},{"source":"sender.js","name":"datePicker","original":{"line":41,"column":18},"generated":{"line":1,"column":1292}},{"source":"sender.js","name":"value","original":{"line":41,"column":29},"generated":{"line":1,"column":1303}},{"source":"sender.js","original":{"line":41,"column":37},"generated":{"line":1,"column":1309}},{"source":"sender.js","original":{"line":41,"column":75},"generated":{"line":1,"column":1345}},{"source":"sender.js","name":"toastText","original":{"line":42,"column":6},"generated":{"line":1,"column":1379}},{"source":"sender.js","name":"empty","original":{"line":42,"column":16},"generated":{"line":1,"column":1381}},{"source":"sender.js","name":"append","original":{"line":42,"column":24},"generated":{"line":1,"column":1389}},{"source":"sender.js","name":"msg","original":{"line":42,"column":31},"generated":{"line":1,"column":1396}},{"source":"sender.js","name":"toast","original":{"line":43,"column":6},"generated":{"line":1,"column":1399}},{"source":"sender.js","name":"show","original":{"line":43,"column":12},"generated":{"line":1,"column":1401}},{"source":"sender.js","original":{"line":45,"column":11},"generated":{"line":1,"column":1408}},{"source":"sender.js","original":{"line":45,"column":11},"generated":{"line":1,"column":1415}},{"source":"sender.js","original":{"line":47,"column":9},"generated":{"line":1,"column":1417}},{"source":"sender.js","original":{"line":47,"column":9},"generated":{"line":1,"column":1424}},{"source":"sender.js","name":"submitHandler","original":{"line":50,"column":13},"generated":{"line":1,"column":1427}},{"source":"sender.js","original":{"line":50,"column":26},"generated":{"line":1,"column":1429}},{"source":"sender.js","original":{"line":50,"column":29},"generated":{"line":1,"column":1440}},{"source":"sender.js","original":{"line":50,"column":29},"generated":{"line":1,"column":1444}},{"source":"sender.js","original":{"line":50,"column":29},"generated":{"line":1,"column":1446}},{"source":"sender.js","original":{"line":50,"column":29},"generated":{"line":1,"column":1448}},{"source":"sender.js","original":{"line":50,"column":29},"generated":{"line":1,"column":1467}},{"source":"sender.js","original":{"line":50,"column":29},"generated":{"line":1,"column":1472}},{"source":"sender.js","name":"event","original":{"line":50,"column":36},"generated":{"line":1,"column":1481}},{"source":"sender.js","name":"event","original":{"line":50,"column":36},"generated":{"line":1,"column":1483}},{"source":"sender.js","original":{"line":50,"column":29},"generated":{"line":1,"column":1486}},{"source":"sender.js","original":{"line":50,"column":29},"generated":{"line":1,"column":1490}},{"source":"sender.js","original":{"line":50,"column":29},"generated":{"line":1,"column":1492}},{"source":"sender.js","original":{"line":50,"column":29},"generated":{"line":1,"column":1494}},{"source":"sender.js","original":{"line":50,"column":29},"generated":{"line":1,"column":1496}},{"source":"sender.js","original":{"line":50,"column":29},"generated":{"line":1,"column":1498}},{"source":"sender.js","original":{"line":50,"column":29},"generated":{"line":1,"column":1505}},{"source":"sender.js","original":{"line":50,"column":29},"generated":{"line":1,"column":1524}},{"source":"sender.js","original":{"line":50,"column":29},"generated":{"line":1,"column":1529}},{"source":"sender.js","original":{"line":50,"column":29},"generated":{"line":1,"column":1538}},{"source":"sender.js","original":{"line":50,"column":29},"generated":{"line":1,"column":1541}},{"source":"sender.js","original":{"line":50,"column":29},"generated":{"line":1,"column":1548}},{"source":"sender.js","original":{"line":50,"column":29},"generated":{"line":1,"column":1555}},{"source":"sender.js","original":{"line":50,"column":29},"generated":{"line":1,"column":1557}},{"source":"sender.js","original":{"line":50,"column":29},"generated":{"line":1,"column":1562}},{"source":"sender.js","original":{"line":50,"column":29},"generated":{"line":1,"column":1564}},{"source":"sender.js","original":{"line":50,"column":29},"generated":{"line":1,"column":1570}},{"source":"sender.js","original":{"line":50,"column":29},"generated":{"line":1,"column":1575}},{"source":"sender.js","name":"formValidation","original":{"line":54,"column":6},"generated":{"line":1,"column":1577}},{"source":"sender.js","name":"now","original":{"line":51,"column":8},"generated":{"line":1,"column":1580}},{"source":"sender.js","original":{"line":51,"column":14},"generated":{"line":1,"column":1583}},{"source":"sender.js","original":{"line":50,"column":29},"generated":{"line":1,"column":1585}},{"source":"sender.js","original":{"line":50,"column":29},"generated":{"line":1,"column":1587}},{"source":"sender.js","name":"event","original":{"line":52,"column":2},"generated":{"line":1,"column":1600}},{"source":"sender.js","name":"preventDefault","original":{"line":52,"column":8},"generated":{"line":1,"column":1602}},{"source":"sender.js","name":"formValidation","original":{"line":54,"column":6},"generated":{"line":1,"column":1620}},{"source":"sender.js","original":{"line":50,"column":29},"generated":{"line":1,"column":1624}},{"source":"sender.js","original":{"line":50,"column":29},"generated":{"line":1,"column":1625}},{"source":"sender.js","original":{"line":50,"column":29},"generated":{"line":1,"column":1627}},{"source":"sender.js","original":{"line":50,"column":29},"generated":{"line":1,"column":1632}},{"source":"sender.js","original":{"line":50,"column":29},"generated":{"line":1,"column":1634}},{"source":"sender.js","name":"fetch","original":{"line":59,"column":10},"generated":{"line":1,"column":1640}},{"source":"sender.js","name":"sendAt","original":{"line":55,"column":10},"generated":{"line":1,"column":1647}},{"source":"sender.js","original":{"line":55,"column":19},"generated":{"line":1,"column":1649}},{"source":"sender.js","name":"Date","original":{"line":55,"column":23},"generated":{"line":1,"column":1653}},{"source":"sender.js","name":"datePicker","original":{"line":55,"column":28},"generated":{"line":1,"column":1658}},{"source":"sender.js","name":"value","original":{"line":55,"column":39},"generated":{"line":1,"column":1669}},{"source":"sender.js","name":"message","original":{"line":57,"column":10},"generated":{"line":1,"column":1676}},{"source":"sender.js","name":"messageText","original":{"line":57,"column":20},"generated":{"line":1,"column":1678}},{"source":"sender.js","name":"text","original":{"line":57,"column":32},"generated":{"line":1,"column":1680}},{"source":"sender.js","original":{"line":57,"column":42},"generated":{"line":1,"column":1688}},{"source":"sender.js","original":{"line":50,"column":29},"generated":{"line":1,"column":1693}},{"source":"sender.js","original":{"line":50,"column":29},"generated":{"line":1,"column":1695}},{"source":"sender.js","original":{"line":50,"column":29},"generated":{"line":1,"column":1700}},{"source":"sender.js","name":"fetch","original":{"line":59,"column":10},"generated":{"line":1,"column":1702}},{"source":"sender.js","name":"event","original":{"line":59,"column":35},"generated":{"line":1,"column":1708}},{"source":"sender.js","name":"event","original":{"line":59,"column":35},"generated":{"line":1,"column":1727}},{"source":"sender.js","name":"event","original":{"line":59,"column":35},"generated":{"line":1,"column":1734}},{"source":"sender.js","name":"originalEvent","original":{"line":59,"column":41},"generated":{"line":1,"column":1736}},{"source":"sender.js","name":"submitter","original":{"line":59,"column":55},"generated":{"line":1,"column":1750}},{"source":"sender.js","name":"id","original":{"line":59,"column":65},"generated":{"line":1,"column":1760}},{"source":"sender.js","original":{"line":59,"column":71},"generated":{"line":1,"column":1764}},{"source":"sender.js","name":"method","original":{"line":60,"column":6},"generated":{"line":1,"column":1765}},{"source":"sender.js","original":{"line":60,"column":14},"generated":{"line":1,"column":1772}},{"source":"sender.js","name":"headers","original":{"line":61,"column":6},"generated":{"line":1,"column":1779}},{"source":"sender.js","original":{"line":61,"column":15},"generated":{"line":1,"column":1787}},{"source":"sender.js","name":"Accept","original":{"line":62,"column":8},"generated":{"line":1,"column":1788}},{"source":"sender.js","original":{"line":62,"column":16},"generated":{"line":1,"column":1795}},{"source":"sender.js","original":{"line":63,"column":24},"generated":{"line":1,"column":1814}},{"source":"sender.js","original":{"line":63,"column":24},"generated":{"line":1,"column":1829}},{"source":"sender.js","name":"Cookies","original":{"line":64,"column":22},"generated":{"line":1,"column":1848}},{"source":"sender.js","name":"Cookies","original":{"line":64,"column":22},"generated":{"line":1,"column":1861}},{"source":"sender.js","name":"get","original":{"line":64,"column":30},"generated":{"line":1,"column":1869}},{"source":"sender.js","original":{"line":64,"column":34},"generated":{"line":1,"column":1873}},{"source":"sender.js","name":"body","original":{"line":66,"column":6},"generated":{"line":1,"column":1888}},{"source":"sender.js","name":"JSON","original":{"line":66,"column":12},"generated":{"line":1,"column":1893}},{"source":"sender.js","name":"stringify","original":{"line":66,"column":17},"generated":{"line":1,"column":1898}},{"source":"sender.js","original":{"line":66,"column":27},"generated":{"line":1,"column":1908}},{"source":"sender.js","name":"contacts","original":{"line":66,"column":29},"generated":{"line":1,"column":1909}},{"source":"sender.js","name":"contacts","original":{"line":66,"column":29},"generated":{"line":1,"column":1918}},{"source":"sender.js","original":{"line":66,"column":27},"generated":{"line":1,"column":1920}},{"source":"sender.js","name":"message","original":{"line":66,"column":39},"generated":{"line":1,"column":1929}},{"source":"sender.js","name":"message","original":{"line":66,"column":39},"generated":{"line":1,"column":1937}},{"source":"sender.js","name":"now","original":{"line":66,"column":48},"generated":{"line":1,"column":1939}},{"source":"sender.js","name":"now","original":{"line":66,"column":48},"generated":{"line":1,"column":1943}},{"source":"sender.js","name":"sendAt","original":{"line":66,"column":53},"generated":{"line":1,"column":1945}},{"source":"sender.js","name":"sendAt","original":{"line":66,"column":53},"generated":{"line":1,"column":1952}},{"source":"sender.js","name":"via","original":{"line":66,"column":61},"generated":{"line":1,"column":1954}},{"source":"sender.js","name":"event","original":{"line":66,"column":66},"generated":{"line":1,"column":1958}},{"source":"sender.js","name":"originalEvent","original":{"line":66,"column":72},"generated":{"line":1,"column":1960}},{"source":"sender.js","name":"submitter","original":{"line":66,"column":86},"generated":{"line":1,"column":1974}},{"source":"sender.js","name":"id","original":{"line":66,"column":96},"generated":{"line":1,"column":1984}},{"source":"sender.js","original":{"line":50,"column":29},"generated":{"line":1,"column":1991}},{"source":"sender.js","original":{"line":50,"column":29},"generated":{"line":1,"column":1996}},{"source":"sender.js","name":"liveToast","original":{"line":69,"column":8},"generated":{"line":1,"column":1998}},{"source":"sender.js","name":"length","original":{"line":69,"column":18},"generated":{"line":1,"column":2000}},{"source":"sender.js","original":{"line":69,"column":27},"generated":{"line":1,"column":2007}},{"source":"sender.js","name":"liveToast","original":{"line":70,"column":6},"generated":{"line":1,"column":2011}},{"source":"sender.js","name":"removeClass","original":{"line":70,"column":16},"generated":{"line":1,"column":2013}},{"source":"sender.js","original":{"line":70,"column":28},"generated":{"line":1,"column":2025}},{"source":"sender.js","name":"addClass","original":{"line":70,"column":52},"generated":{"line":1,"column":2049}},{"source":"sender.js","original":{"line":70,"column":61},"generated":{"line":1,"column":2058}},{"source":"sender.js","name":"toast","original":{"line":71,"column":12},"generated":{"line":1,"column":2072}},{"source":"sender.js","original":{"line":71,"column":20},"generated":{"line":1,"column":2074}},{"source":"sender.js","name":"bootstrap","original":{"line":71,"column":24},"generated":{"line":1,"column":2078}},{"source":"sender.js","name":"Toast","original":{"line":71,"column":34},"generated":{"line":1,"column":2088}},{"source":"sender.js","name":"liveToast","original":{"line":71,"column":40},"generated":{"line":1,"column":2094}},{"source":"sender.js","name":"now","original":{"line":72,"column":10},"generated":{"line":1,"column":2097}},{"source":"sender.js","name":"toastText","original":{"line":73,"column":8},"generated":{"line":1,"column":2099}},{"source":"sender.js","name":"empty","original":{"line":73,"column":18},"generated":{"line":1,"column":2101}},{"source":"sender.js","name":"append","original":{"line":73,"column":26},"generated":{"line":1,"column":2109}},{"source":"sender.js","original":{"line":73,"column":33},"generated":{"line":1,"column":2116}},{"source":"sender.js","name":"toastText","original":{"line":75,"column":8},"generated":{"line":1,"column":2149}},{"source":"sender.js","name":"empty","original":{"line":76,"column":11},"generated":{"line":1,"column":2151}},{"source":"sender.js","name":"append","original":{"line":77,"column":11},"generated":{"line":1,"column":2159}},{"source":"sender.js","name":"sendAt","original":{"line":78,"column":37},"generated":{"line":1,"column":2166}},{"source":"sender.js","name":"sendAt","original":{"line":78,"column":37},"generated":{"line":1,"column":2191}},{"source":"sender.js","name":"sendAt","original":{"line":78,"column":37},"generated":{"line":1,"column":2198}},{"source":"sender.js","name":"getDate","original":{"line":78,"column":44},"generated":{"line":1,"column":2200}},{"source":"sender.js","name":"sendAt","original":{"line":79,"column":14},"generated":{"line":1,"column":2210}},{"source":"sender.js","name":"sendAt","original":{"line":79,"column":14},"generated":{"line":1,"column":2215}},{"source":"sender.js","name":"sendAt","original":{"line":79,"column":14},"generated":{"line":1,"column":2222}},{"source":"sender.js","name":"getMonth","original":{"line":79,"column":21},"generated":{"line":1,"column":2224}},{"source":"sender.js","original":{"line":79,"column":34},"generated":{"line":1,"column":2235}},{"source":"sender.js","name":"sendAt","original":{"line":80,"column":16},"generated":{"line":1,"column":2237}},{"source":"sender.js","name":"sendAt","original":{"line":80,"column":16},"generated":{"line":1,"column":2242}},{"source":"sender.js","name":"sendAt","original":{"line":80,"column":16},"generated":{"line":1,"column":2249}},{"source":"sender.js","name":"getFullYear","original":{"line":80,"column":23},"generated":{"line":1,"column":2251}},{"source":"sender.js","name":"sendAt","original":{"line":80,"column":45},"generated":{"line":1,"column":2265}},{"source":"sender.js","name":"sendAt","original":{"line":80,"column":45},"generated":{"line":1,"column":2275}},{"source":"sender.js","name":"sendAt","original":{"line":80,"column":45},"generated":{"line":1,"column":2282}},{"source":"sender.js","name":"getHours","original":{"line":80,"column":52},"generated":{"line":1,"column":2284}},{"source":"sender.js","name":"sendAt","original":{"line":80,"column":66},"generated":{"line":1,"column":2295}},{"source":"sender.js","name":"sendAt","original":{"line":80,"column":66},"generated":{"line":1,"column":2300}},{"source":"sender.js","name":"sendAt","original":{"line":80,"column":66},"generated":{"line":1,"column":2307}},{"source":"sender.js","name":"getMinutes","original":{"line":80,"column":73},"generated":{"line":1,"column":2309}},{"source":"sender.js","original":{"line":75,"column":8},"generated":{"line":1,"column":2322}},{"source":"sender.js","name":"toast","original":{"line":83,"column":6},"generated":{"line":1,"column":2330}},{"source":"sender.js","name":"show","original":{"line":83,"column":12},"generated":{"line":1,"column":2332}},{"source":"sender.js","original":{"line":50,"column":29},"generated":{"line":1,"column":2340}},{"source":"sender.js","original":{"line":50,"column":29},"generated":{"line":1,"column":2345}},{"source":"sender.js","original":{"line":50,"column":29},"generated":{"line":1,"column":2347}},{"source":"sender.js","original":{"line":50,"column":29},"generated":{"line":1,"column":2351}},{"source":"sender.js","original":{"line":50,"column":29},"generated":{"line":1,"column":2357}},{"source":"sender.js","original":{"line":50,"column":29},"generated":{"line":1,"column":2364}},{"source":"sender.js","original":{"line":50,"column":29},"generated":{"line":1,"column":2366}},{"source":"sender.js","original":{"line":50,"column":29},"generated":{"line":1,"column":2375}},{"source":"sender.js","name":"submitHandler","original":{"line":50,"column":13},"generated":{"line":1,"column":2381}},{"source":"sender.js","name":"submitHandler","original":{"line":50,"column":13},"generated":{"line":1,"column":2388}},{"source":"sender.js","original":{"line":50,"column":26},"generated":{"line":1,"column":2397}},{"source":"sender.js","original":{"line":50,"column":26},"generated":{"line":1,"column":2400}},{"source":"sender.js","original":{"line":50,"column":26},"generated":{"line":1,"column":2407}},{"source":"sender.js","original":{"line":50,"column":26},"generated":{"line":1,"column":2409}},{"source":"sender.js","original":{"line":50,"column":26},"generated":{"line":1,"column":2415}},{"source":"sender.js","original":{"line":50,"column":26},"generated":{"line":1,"column":2420}},{"source":"sender.js","original":{"line":50,"column":26},"generated":{"line":1,"column":2432}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":2435}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":2443}},{"source":"sender.js","original":{"line":50,"column":7},"generated":{"line":1,"column":2457}}],"sources":{"sender.js":"import { dateTimeValidation, toSendNow } from './schedule.js';\r\nimport { contacts } from './mailingList.js';\r\nconst liveToast = $('#notification').first();\r\nconst toastText = $('#toast-text');\r\nconst scheduleSwitch = $('#schedule-switch');\r\nconst messageText = $('#message-input');\r\n\r\nconst checkCheckboxes = () => {\r\n  const checkboxes = $('.mailing-list-checkbox').toArray();\r\n  checkboxes.forEach((checkbox) => {\r\n    if (checkbox.checked) return true;\r\n  });\r\n  return checkboxes;\r\n};\r\n\r\nconst formValidation = () => {\r\n  if (!checkCheckboxes()) {\r\n    if (liveToast.length > 0) {\r\n      liveToast.removeClass('bg-primary bg-seccess').addClass('bg-danger');\r\n      const toast = new bootstrap.Toast(liveToast);\r\n      toastText.empty().append('You must select at least one contact ‼️😬');\r\n      toast.show();\r\n    }\r\n    return false;\r\n  }\r\n  if (!$('#message-switch').is(':checked') && !messageText.text()) {\r\n    if (liveToast.length > 0) {\r\n      liveToast.removeClass('bg-primary bg-seccess').addClass('bg-danger');\r\n      const toast = new bootstrap.Toast(liveToast);\r\n      toastText.empty().append('Message body can not be emty‼️😬');\r\n      toast.show();\r\n    }\r\n    return false;\r\n  }\r\n\r\n  if (!scheduleSwitch.is(':checked') && !dateTimeValidation(datePicker.value)) {\r\n    if (liveToast.length > 0) {\r\n      liveToast.removeClass('bg-primary bg-seccess').addClass('bg-danger');\r\n\r\n      const toast = new bootstrap.Toast(liveToast);\r\n      const msg = datePicker.value ? 'Must be at least 1 hour ahead‼️😬' : 'You must pick date and time‼️😬';\r\n      toastText.empty().append(msg);\r\n      toast.show();\r\n    }\r\n    return false;\r\n  }\r\n  return true;\r\n};\r\n\r\nexport const submitHandler = async (event) => {\r\n  const now = toSendNow();\r\n  event.preventDefault();\r\n\r\n  if (formValidation()) {\r\n    const sendAt = new Date(datePicker.value);\r\n\r\n    const message = messageText.text() || null;\r\n\r\n    await fetch(`/admin/messages/${event.originalEvent.submitter.id}`, {\r\n      method: 'POST',\r\n      headers: {\r\n        Accept: 'application/json',\r\n        'Content-Type': 'application/json',\r\n        'CSRF-Token': Cookies.get('XSRF-TOKEN'),\r\n      },\r\n      body: JSON.stringify({ contacts, message, now, sendAt, via: event.originalEvent.submitter.id }),\r\n    });\r\n\r\n    if (liveToast.length > 0) {\r\n      liveToast.removeClass('bg-danger bg-primary').addClass('bg-success');\r\n      const toast = new bootstrap.Toast(liveToast);\r\n      if (now) {\r\n        toastText.empty().append('Message successfully sent. 🎉');\r\n      } else {\r\n        toastText\r\n          .empty()\r\n          .append(\r\n            `Message scheduled to  ${sendAt.getDate()}/${\r\n              sendAt.getMonth() + 1\r\n            }/${sendAt.getFullYear()}  at  ${sendAt.getHours()}:${sendAt.getMinutes()} 🎉`\r\n          );\r\n      }\r\n      toast.show();\r\n    }\r\n  }\r\n};\r\n"},"lineCount":null}},"error":null,"hash":"fdde5e346d118fbdc4e4d2a4384d22b8","cacheData":{"env":{}}}